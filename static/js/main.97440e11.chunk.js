(this["webpackJsonptruth-or-lie-game"]=this["webpackJsonptruth-or-lie-game"]||[]).push([[0],{45:function(e,t,a){e.exports=a(75)},50:function(e,t,a){},52:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(25),l=a.n(s),i=(a(50),a(51),a(52),a(11)),u=a.n(i),c=a(16),o=a(26),m=a(27),h=a(13),d=a(29),p=a(28),y=a(30),v=a.n(y);v.a.initializeApp({apiKey:"AIzaSyDb2HjIn9n3E3voLC04pXzBf5yuaQQAKA4",authDomain:"truth-or-lie-22542.firebaseapp.com",databaseURL:"https://truth-or-lie-22542.firebaseio.com"});v.a.auth;var f=v.a.database(),E=a(76),b=a(85),g=a(77),S=a(78),k=a(79),G=a(80),w=a(81),j=a(82),O=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;Object(o.a)(this,a),r=t.call(this,e);var n=localStorage.getItem("player-name");return r.state={statements:[],guess:null,readError:null,writeError:null,playerName:"",playerId:n,playerInfo:null,currentPlayer:null,resultDeclare:!1},r.handleChange=r.handleChange.bind(Object(h.a)(r)),r.handleSubmit=r.handleSubmit.bind(Object(h.a)(r)),r.submitGuess=r.submitGuess.bind(Object(h.a)(r)),r.handleGuess=r.handleGuess.bind(Object(h.a)(r)),r.listenForPlayer=r.listenForPlayer.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null}),this.state.playerId&&this.listenForPlayer(this.state.playerId);try{f.ref("statements").on("value",(function(e){var a=[];e.forEach((function(e){a.push(e.val())}));var r=a.some((function(e){return e.isLie}));t.setState({statements:a,resultDeclare:r})})),f.ref("currentPlayer").on("value",(function(e){var a=e.val();t.setState({currentPlayer:a})}))}catch(a){this.setState({readError:a.message})}case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listenForPlayer",value:function(){var e=Object(c.a)(u.a.mark((function e(t){var a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{f.ref("players/"+t).on("value",(function(e){var t=e.val();a.setState({playerInfo:t,guess:t.currentGuess})})),f.ref("players/")}catch(r){this.setState({readError:r.message})}case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){this.setState({playerName:e.target.value})}},{key:"handleGuess",value:function(e){this.setState({guess:e.target.value})}},{key:"submitGuess",value:function(){var e=Object(c.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.guess,r=t.playerId,this.setState({writeError:null}),e.prev=2,e.next=5,f.ref("players/"+r).update({currentGuess:a,lockedGuess:!0});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.setState({writeError:e.t0.message});case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(c.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),this.setState({writeError:null}),e.prev=2,a=f.ref().child("players").push().key,e.next=6,f.ref("players/"+a).set({playerId:a,name:this.state.playerName,currentGuess:null,totalCorrectGuess:0,timestamp:Date.now()});case 6:this.setState({playerName:"",playerId:a}),localStorage.setItem("player-name",a),this.listenForPlayer(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),this.setState({writeError:e.t0.message});case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.statements,r=t.playerId,s=t.playerName,l=t.error,i=t.writeError,u=t.guess,c=t.playerInfo,o=t.currentPlayer,m=t.resultDeclare,h="",d="";if(m){var p=a.find((function(e){return e.isLie}));u==p.id?(h="success",d="Great.....you guessed it!"):(h="danger",d="Better luck next time!")}return n.a.createElement("div",null,n.a.createElement(E.a,null,r?n.a.createElement("div",{className:"player-wrapper"},0===a.length&&n.a.createElement("div",null,"Game will begin soon..."),m&&n.a.createElement(b.a,{color:h},d),o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,o.name,"'s lie is:"),n.a.createElement(g.a,null,a.map((function(t){return n.a.createElement(S.a,{active:u==t.id,key:t.id,tag:"label",for:t.id,action:!0,disabled:o&&o.playerId==r||!!c&&c.lockedGuess},n.a.createElement("input",{type:"radio",id:t.id,name:"guess",value:t.id,checked:u==t.id,onChange:e.handleGuess,className:"invisible"}),n.a.createElement("label",{for:t.id},t.value))})))),o&&o.playerId==r?n.a.createElement("div",null,"You cannot guess...these are your statements"):0!=a.length&&n.a.createElement(k.a,{color:"primary",size:"lg",active:!0,onClick:this.submitGuess,disabled:!!c&&c.lockedGuess},c&&c.lockedGuess?"Your guess is submitted":"Submit Guess")):n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement(G.a,null,n.a.createElement(w.a,{for:"userName"},"What is your good name?"),n.a.createElement(j.a,{type:"text",name:"name",id:"userName",placeholder:"Name",onChange:this.handleChange,value:s})),l?n.a.createElement("p",null,i):null,n.a.createElement(k.a,{color:"primary",size:"lg",active:!0,type:"submit",disabled:!s},"Start Playing"))))}}]),a}(r.Component),C=a(20),I=a(22),N=a(83),P=function(e){var t=e.players;return n.a.createElement(N.a,{striped:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Sr.No."),n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Correct guesses"))),n.a.createElement("tbody",null,t.map((function(e,t){return n.a.createElement("tr",{key:e.id},n.a.createElement("th",{scope:"row"},t+1),n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.totalCorrectGuess))}))))},x=a(84),L=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).state={statement1:"",statement2:"",statement3:"",players:[],readError:null,writeError:null,playedPlayerIds:{},currentPlayer:null,guessStart:!1,lieStatementNo:null,statement1Guess:0,statement2Guess:0,statement3Guess:0},r.handleChange=r.handleChange.bind(Object(h.a)(r)),r.handleGuessStart=r.handleGuessStart.bind(Object(h.a)(r)),r.handleSubmitLie=r.handleSubmitLie.bind(Object(h.a)(r)),r.choosePlayer=r.choosePlayer.bind(Object(h.a)(r)),r.handleGuess=r.handleGuess.bind(Object(h.a)(r)),r}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({readError:null});try{f.ref("players").on("value",(function(e){var a=[],r=0,n=0,s=0;e.forEach((function(e){var l=e.val();if(a.push(l),t.state.guessStart)switch(l.currentGuess){case"1":r++;break;case"2":n++;break;case"3":s++;break;default:return}})),a=a.sort((function(e,t){return parseInt(t.totalCorrectGuess)-parseInt(e.totalCorrectGuess)})),t.setState({players:a,statement1Guess:r,statement2Guess:n,statement3Guess:s})}))}catch(a){this.setState({readError:a.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,r=t.value;this.setState(Object(I.a)({},a,r))}},{key:"handleGuessStart",value:function(){var e=Object(c.a)(u.a.mark((function e(t){var a,r,n,s,l,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),this.setState({writeError:null});try{a=this.state,r=a.statement1,n=a.statement2,s=a.statement3,l=a.players,i=a.currentPlayer,(c={})["/statements"]={1:{value:r,id:1},2:{value:n,id:2},3:{value:s,id:3}},l.forEach((function(e){var t=Object(C.a)(Object(C.a)({},e),{},{currentGuess:null,lockedGuess:!1});c["/players/"+e.playerId]=t})),c["/currentPlayer"]=i,f.ref().update(c),this.setState({guessStart:!0})}catch(u){this.setState({writeError:u.message})}case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleSubmitLie",value:function(){var e=Object(c.a)(u.a.mark((function e(){var t,a,r,n,s,l,i,c,o,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({writeError:null});try{t=this.state,a=t.statement1,r=t.statement2,n=t.statement3,s=t.players,l=t.lieStatementNo,i=t.playedPlayerIds,c=t.currentPlayer,(o={})["/statements"]={1:{value:a,id:1,isLie:1==l},2:{value:r,id:2,isLie:2==l},3:{value:n,id:3,isLie:3==l}},s.forEach((function(e){var t=e.currentGuess==l?parseInt(e.totalCorrectGuess)+1:e.totalCorrectGuess,a=Object(C.a)(Object(C.a)({},e),{},{totalCorrectGuess:t});o["/players/"+e.playerId]=a})),f.ref().update(o),m=Object(C.a)(Object(C.a)({},i),{},Object(I.a)({},c.playerId,!0)),this.setState({currentPlayer:null,guessStart:!1,playedPlayerIds:m,lieStatementNo:null,statement1:"",statement2:"",statement3:""})}catch(u){this.setState({writeError:u.message})}case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"choosePlayer",value:function(){var e=function(e,t){if(e.length===Object.keys(t).length)return null;var a=e.filter((function(e){return!t[e.playerId]})),r=a.length;return a[Math.floor(Math.random()*r)]}(this.state.players,this.state.playedPlayerIds);this.setState({currentPlayer:e})}},{key:"handleGuess",value:function(e){this.setState({lieStatementNo:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.statement1,a=e.statement2,r=e.statement3,s=e.error,l=e.writeError,i=e.currentPlayer,u=e.guessStart,c=e.lieStatementNo,o=e.players,m=e.statement1Guess,h=e.statement2Guess,d=e.statement3Guess,p=e.playedPlayerIds,y=o.length-1,v=y>0?100*parseInt(m)/y:0,f=y>0?100*parseInt(h)/y:0,b=y>0?100*parseInt(d)/y:0,G=o.length>0&&o.length==Object.keys(p).length;return n.a.createElement("div",null,n.a.createElement(E.a,{className:"admin-wrapper"},n.a.createElement("div",{className:"statement-wrapper"},i?n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"h1"},n.a.createElement("mark",null,i.name," "),"statements are as follows:"),n.a.createElement(g.a,null,n.a.createElement(S.a,{active:1==c,tag:"label",for:"1",action:!0},n.a.createElement("input",{type:"radio",id:"1",name:"guess",value:"1",checked:1==c,onChange:this.handleGuess,className:"invisible"}),n.a.createElement(j.a,{type:"text",onChange:this.handleChange,name:"statement1",value:t}),u&&n.a.createElement("div",{className:"progress-wrapper"},n.a.createElement(x.a,{animated:!0,color:"info",value:v},v,"%"))),n.a.createElement(S.a,{active:2==c,tag:"label",for:"2",action:!0},n.a.createElement("input",{type:"radio",id:"2",name:"guess",value:"2",checked:2==c,onChange:this.handleGuess,className:"invisible"}),n.a.createElement(j.a,{type:"text",onChange:this.handleChange,name:"statement2",value:a}),u&&n.a.createElement("div",{className:"progress-wrapper"},n.a.createElement(x.a,{animated:!0,color:"info",value:f},f,"%"))),n.a.createElement(S.a,{active:3==c,tag:"label",for:"3",action:!0},n.a.createElement("input",{type:"radio",id:"3",name:"guess",value:"3",checked:3==c,onChange:this.handleGuess,className:"invisible"}),n.a.createElement(j.a,{type:"text",onChange:this.handleChange,name:"statement3",value:r}),u&&n.a.createElement("div",{className:"progress-wrapper"},n.a.createElement(x.a,{animated:!0,color:"info",value:b},f,"%")))),s?n.a.createElement("p",null,l):null,u?n.a.createElement(k.a,{color:"primary",size:"lg",active:!0,onClick:this.handleSubmitLie},"Submit Lie"):n.a.createElement(k.a,{color:"primary",size:"lg",active:!0,onClick:this.handleGuessStart},"Start Guess")):G?n.a.createElement("div",{className:"game-over"},"Game Over"):n.a.createElement(k.a,{color:"primary",size:"lg",active:!0,onClick:this.choosePlayer},"Choose the Player")),n.a.createElement("div",{className:"players-list"},n.a.createElement(P,{players:this.state.players}))))}}]),a}(r.Component),D=a(43),z=a(7);var F=function(){return n.a.createElement(D.a,null,n.a.createElement(z.c,null,n.a.createElement(z.a,{exact:!0,path:"/truth-or-lie-game",component:O}),n.a.createElement(z.a,{path:"/truth-or-lie-game/admin",component:L})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.97440e11.chunk.js.map